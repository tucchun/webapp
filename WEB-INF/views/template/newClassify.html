<div class="wrap">
    <div class="tb-head">商品分类管理&gt;&gt;新增分类</div>
    <div class="tb-content">
        <form action="#" id="form_classify">
        <div class="tb-wrap">
            <table class="table wrap-table">
                <tbody>
                <tr>
                    <td>一级分类名:</td>
                    <td>
                        <div class="col-sm-10 form-inline">
                            <input type="text" class="form-control" name="" placeholder="一级分类">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>二级分类:</td>
                    <td>
                        <div class="form-inline sort_wrap" data-optype="update">
                            <input type="text" class="form-control" name="childName"><input type="hidden" name="ids"><i class="icon icon-down"></i><i class="icon icon-del"></i>
                        </div>
                        <div class="form-inline sort_wrap" data-optype="update">
                            <input type="text" class="form-control" name="childName"><input type="hidden" name="ids"><i class="icon icon-up"></i><i class="icon icon-down"></i><i class="icon icon-del"></i>
                        </div>
                        <div class="form-inline sort_wrap" data-optype="update">
                            <input type="text" class="form-control" name="childName"><input type="hidden" name="ids"><i class="icon icon-up"></i><i class="icon icon-down"></i><i class="icon icon-del"></i>
                        </div>
                        <div class="form-inline sort_wrap" data-optype="update">
                            <input type="text" class="form-control" name="childName"><input type="hidden" name="ids"><i class="icon icon-up"></i><i class="icon icon-down"></i><i class="icon icon-del"></i>
                        </div>
                        <div class="form-inline sort_wrap" data-optype="update">
                            <input type="text" class="form-control" name="childName"><input type="hidden" name="ids"><i class="icon icon-up"></i><i class="icon icon-del"></i><i class="icon icon-add"></i>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="col-sm-12 form-submit-btns text-center">
                            <button type="submit" class="btn btn-main btn-lg">保存</button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    require(['js/page_sort'],function(page_sort){
        var _self = $('#newClassify');
        _self.find('.wrap-table').on('click','i.icon-up',function(){
            page_sort.instances($(this));
        });
        _self.find('.wrap-table').on('click','i.icon-down',function(){
            page_sort.instances($(this),'form');
        });
        _self.find('.wrap-table').on('click','i.icon-add',function(){
            page_sort.instances($(this),'form');
        });
        //提交需要的全局变量，将要提交的数据放这里；
        var commitData = {
            update:[],dels:[]
        };
        _self.find('.wrap-table').on('click','i.icon-del',function(){
            //ajax 成功后判断是否调用该方法，默认无提示删除；
            commitData.dels.push($(this).parents('.sort_wrap').find('input[name=ids]').val());
            page_sort.del($(this));
        });
        _self.find('#form_classify').on('submit',function(){
            var inputArray = $(this).find('.sort_wrap');
            $.each(inputArray,function(index,el){
                var optTag = $(el).attr('data-optype'),obj_input = {name:'',id:''};
                obj_input.name = $(el).find('input[name="childName"]').val();
                obj_input.id = $(el).find('input[name="ids"]').val();

            });
            console.log(commitData);
            //ajax 提交后，清除commitData的數據；
            commitData = {
                update:[],dels:[]
            };
            return false;
        })
    })
</script>